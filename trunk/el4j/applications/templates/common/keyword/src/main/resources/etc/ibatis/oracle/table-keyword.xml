<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="keyword-core">
	<!-- Version: $Revision$ -->
	<!-- URL: $URL$ -->
	<!-- Date: $Date$ -->
	<!-- Author: $Author$ -->

	<insert id="insertKeyword">
		<selectKey resultClass="int" keyProperty="key">
			select KEYWORD_SEQUENCE.NEXTVAL AS KEY FROM DUAL
		</selectKey>
		insert into KEYWORDS (KEYID, NAME, DESCRIPTION,
			OPTIMISTICLOCKINGVERSION) values (#key#, #name#,
			#description#, #optimisticLockingVersion#)
	</insert>

	<update id="updateKeyword">
		update KEYWORDS set NAME=#name#, DESCRIPTION=#description#,
			OPTIMISTICLOCKINGVERSION=OPTIMISTICLOCKINGVERSION+1 where
			KEYID=#key# AND OPTIMISTICLOCKINGVERSION=#optimisticLockingVersion#
	</update>
</sqlMap>
