<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:el4j="http://www.elca.ch/el4j/taglib">
	
	<ui:remove><!--
	
		Detail View Parameters (all are optional, if not set they are derived from pageId)
		----------------------
		String values:
			entityShortName : short name of entity (see ch.elca.el4j.seam.generic.EntityShortNameMapping)
			entityClassName : fully qualified class name
			masterPage      : pageId of corresponding master page
			
		Component fragments:
			fields          : the region containing all fields
			crudBar         : a set of buttons (e.g. save, delete etc.)
			customMapping   : a mapping of fieldName (or fieldType) to JSF components
			                  (see entityTest.xhtml for an example)
			customRemark    : the region behind each edit field
		
	--></ui:remove>

	<ui:remove><!-- assign values to JSF variables --></ui:remove>
	<c:if test="#{empty entityShortName}">
		<el4j:set var="entityShortName"
			value="#{utils.deriveEntityShortName()}" />
	</c:if>

	<el4j:set var="entityClassName"
		value="#{utils.getEntityClassName(entityShortName)}" />

	<c:if test="#{empty title}">
		<el4j:set var="title" value="#{el4j:h10nEntityName(entityShortName)}" />
	</c:if>

	<c:if test="#{empty masterPage}">
		<el4j:set var="masterPage"
			value="#{utils.getDefaultMasterPage(entityShortName)}" />
	</c:if>

	<h:messages globalOnly="true" styleClass="message" />

	<h:form id="editForm">
		<rich:panel headerClass="topPanel">
			<f:facet name="header">#{title}</f:facet>

			<ui:remove><!-- insert all fields --></ui:remove>
			<ui:insert name="fields">
				<el4j:fieldSet />
			</ui:insert>

			<div style="clear: both" />

			<p style="font-size: 10px">
				*) #{messages.RequiredFieldNote}
			</p>

			<ui:remove><!-- insert buttons (save, update, delete, cancel) --></ui:remove>
			<ui:insert name="crudBar">
				<el4j:crudBar masterPage="#{masterPage}" />
			</ui:insert>

		</rich:panel>

	</h:form>

</ui:composition>

