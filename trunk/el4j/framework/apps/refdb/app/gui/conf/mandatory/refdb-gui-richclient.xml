<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <!-- Version: $Revision$ -->
    <!-- Source: $Source$ -->
    <!-- Date: $Date$ -->
    <!-- Author: $Author$ -->

    <!-- 
        The application itself.
    -->
    <bean id="application"
        class="org.springframework.richclient.application.Application">
        <constructor-arg index="0">
            <ref bean="applicationDescriptor" />
        </constructor-arg>
        <constructor-arg index="1">
            <ref bean="refdbLifecycleAdvisor" />
        </constructor-arg>
    </bean>

    <!--
        Main bean to control the application.
    -->
    <bean id="refdbLifecycleAdvisor"
        class="ch.elca.el4j.apps.refdb.gui.ApplicationLifecycleAdvisor">
        <property name="windowCommandBarDefinitions">
            <value>classpath:refdb/commands.xml</value>
        </property>
        <property name="startingPageId">
            <value>keywordView</value>
        </property>
    </bean>

    <!-- 
        Abstract view for RefDB-Application.
    -->
    <bean id="abstractView" 
        class="org.springframework.richclient.application.support.DefaultViewDescriptor"
        abstract="true">
        <property name="viewProperties">
            <map>
                <entry key="referenceService">
                    <ref bean="referenceService" />
                </entry>
            </map>
        </property>
    </bean>

    <!-- 
        Reference view of RefDB-Application.
    -->
    <bean id="referenceView" parent="abstractView">
        <property name="viewClass">
            <value>
                ch.elca.el4j.apps.refdb.gui.views.ReferenceView
            </value>
        </property>
    </bean>

    <!-- 
        Keyword view of RefDB-Application.
    -->
    <bean id="keywordView" parent="abstractView">
        <property name="viewClass">
            <value>
                ch.elca.el4j.apps.refdb.gui.views.KeywordView
            </value>
        </property>
    </bean>

    <!-- 
        Describes the application.
    -->
    <bean id="applicationDescriptor"
        class="org.springframework.richclient.application.support.DefaultApplicationDescriptor">
        <property name="version">
            <value>1.0</value>
        </property>
        <property name="buildId">
            <value>20051128</value>
        </property>
    </bean>

    <!-- 
        Place where applications will be configured.
    -->
    <bean id="applicationObjectConfigurer"
        class="org.springframework.richclient.application.config.DefaultApplicationObjectConfigurer">
        <constructor-arg index="0">
            <ref bean="messageSource" />
        </constructor-arg>
        <constructor-arg index="1">
            <ref bean="imageSource" />
        </constructor-arg>
        <constructor-arg index="2">
            <ref bean="iconSource" />
        </constructor-arg>
    </bean>

    <!-- 
        Sends all application events to every registered application listener.
    -->
    <bean id="applicationEventMulticaster"
        class="org.springframework.context.event.SimpleApplicationEventMulticaster" />

    <!-- 
        Where components are created and receive all needed stuff.
    -->
    <bean id="componentFactory"
        class="org.springframework.richclient.factory.DefaultComponentFactory">
        <property name="iconSource">
            <ref bean="iconSource" />
        </property>
        <property name="messageSource">
            <ref bean="messageSource" />
        </property>
    </bean>

    <!-- 
        Language specific messages will be taken from this source.
    -->
    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>refdb.messages</value>
                <value>org.springframework.richclient.application.messages</value>
            </list>
        </property>
    </bean>

    <!-- 
        Images will be taken by this source.
    -->
    <bean id="imageSource"
        class="org.springframework.richclient.image.DefaultImageSource">
        <constructor-arg index="0">
            <ref bean="imageResourcesFactory" />
        </constructor-arg>
        <property name="brokenImageIndicator">
            <value>images/alert/error_obj.gif</value>
        </property>
    </bean>

    <!-- 
        Factory to load images by using short names that are defined in 
        property files.
    -->
    <bean id="imageResourcesFactory"
        class="org.springframework.context.support.ResourceMapFactoryBean">
        <property name="locations">
            <list>
                <value>classpath:org/springframework/richclient/image/images.properties</value>
                <value>classpath:refdb/images.properties</value>
            </list>
        </property>
        <property name="resourceBasePath">
            <value>images/</value>
        </property>
    </bean>

    <!-- 
        Icons will be taken from this source.
    -->
    <bean id="iconSource"
        class="org.springframework.richclient.image.DefaultIconSource">
        <constructor-arg index="0">
            <ref bean="imageSource" />
        </constructor-arg>
    </bean>

    <!-- 
        Sets the look and feel for the application.
    -->
    <bean id="lookAndFeelConfigurer"
        class="org.springframework.richclient.application.config.JGoodiesLooksConfigurer">
        <property name="popupDropShadowEnabled" value="false" />
        <property name="theme">
            <bean
                class="com.jgoodies.looks.plastic.theme.ExperienceBlue" />
        </property>
    </bean>
    
    <!-- 
        Intercepts displayed components (i.e. for highlighting a component on a
        validation error).
    -->
    <bean id="formComponentInterceptorFactory"
        class="org.springframework.richclient.form.builder.support.ChainedInterceptorFactory">
        <property name="interceptorFactories">
            <list>
                <bean class="org.springframework.richclient.form.builder.support.OverlayValidationInterceptorFactory" />
                <bean class="org.springframework.richclient.text.TextComponentPopupInterceptorFactory" />
                <bean class="org.springframework.richclient.form.builder.support.ColorValidationInterceptorFactory">
                    <property name="errorColor">
                        <value>255,245,245</value>
                    </property>
                </bean>
                <bean class="org.springframework.richclient.list.ComboBoxAutoCompletionInterceptorFactory">
                    <property name="messageSource">
                        <ref bean="messageSource" />
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!--
        Fetches names, labels, captions and descriptions displayed by components
        from message source.
    -->
    <bean id="formPropertyFaceDescriptorSource"
        class="org.springframework.binding.form.support.MessageSourceFormPropertyFaceDescriptorSource" />
    
    <!-- 
        Validation rules for input data.
    -->
    <bean id="rulesSource"
        class="ch.elca.el4j.apps.refdb.rules.ValidationRulesSource" />
    
<!-- 
    <bean id="binderSelectionStrategy"
        class="org.springframework.richclient.form.binding.swing.SwingBinderSelectionStrategy">
        <property name="bindersForPropertyTypes">
            <map>
                <!- -                <entry>
                    <key>
                    <value type="java.lang.Class">java.util.Date</value>
                    </key>
                    <bean 
                    class="org.springframework.richclient.samples.petclinic.ui.binder.CustomDatePickerBinder"/>
                    </entry>- ->
                <entry>
                    <key>
                        <value type="java.lang.Class">
                            org.springframework.samples.petclinic.PetType
                        </value>
                    </key>
                    <bean
                        class="org.springframework.richclient.samples.petclinic.ui.binder.PetTypeBinder">
                        <property name="clinic">
                            <ref bean="clinic" />
                        </property>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="newOwnerWizard"
        class="org.springframework.richclient.samples.petclinic.ui.NewOwnerWizard">
        <property name="clinic">
            <ref bean="clinic" />
        </property>
    </bean>

    <bean id="vetManagerView"
        class="org.springframework.richclient.application.support.DefaultViewDescriptor">
        <property name="viewClass">
            <value>
                org.springframework.richclient.samples.petclinic.ui.VetManagerView
            </value>
        </property>
        <property name="viewProperties">
            <map>
                <entry key="clinic">
                    <ref bean="clinic" />
                </entry>
            </map>
        </property>
    </bean>

    <bean id="setupWizard"
        class="org.springframework.richclient.application.setup.SetupWizard">
        <property name="licenseTextLocation">
            <value>
                /org/springframework/richclient/samples/petclinic/license.html
            </value>
        </property>
	</bean>
    -->
</beans>
