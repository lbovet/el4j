<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sqlMap
	PUBLIC "-//iBATIS.com/DTD SQL Map 2.0//EN"
	"http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="keyword-core">
    <!-- Version: $Revision$ -->
    <!-- Source: $Source$ -->
    <!-- Date: $Date$ -->
    <!-- Author: $Author$ -->

    <insert id="insertKeyword">
        <selectKey resultClass="int" keyProperty="key">
            select KEYWORD_SEQUENCE.NEXTVAL AS KEY FROM DUAL
        </selectKey>
        insert into KEYWORDS (KEYID, NAME, DESCRIPTION,
            OPTIMISTICLOCKINGVERSION) values (#key#, #name#,
            #description#, #optimisticLockingVersion#)
    </insert>

    <update id="updateKeyword">
        update KEYWORDS set NAME=#name#, DESCRIPTION=#description#,
            OPTIMISTICLOCKINGVERSION=OPTIMISTICLOCKINGVERSION+1 where
            KEYID=#key# AND OPTIMISTICLOCKINGVERSION=#optimisticLockingVersion#
    </update>
</sqlMap>
