<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    
    <!-- Version: $Revision$ -->
    <!-- Source: $URL$ -->
    <!-- Date: $Date$ -->
    <!-- Author: $Author$ -->
    
    <bean id="rmiProtocol" class="ch.elca.el4j.services.remoting.protocol.Rmi">
        <property name="serviceHost">
            <value>${rmi.host}</value>
        </property>
        <property name="servicePort">
            <value>${rmi.port}</value>
        </property>
        <property name="implicitContextPassingRegistry">
            <ref local="implicitContextPassingRegistry" />
        </property>
    </bean>
    <bean id="hessianProtocol" class="ch.elca.el4j.services.remoting.protocol.Hessian">
        <property name="serviceHost">
            <value>${j2ee-web.host}</value>
        </property>
        <property name="servicePort">
            <value>${j2ee-web.port}</value>
        </property>
        <property name="contextPath">
            <value>module-remoting_and_interface_enrichment-tests-web</value>
        </property>
        <property name="implicitContextPassingRegistry">
            <ref local="implicitContextPassingRegistry" />
        </property>
    </bean>
    <bean id="burlapProtocol" class="ch.elca.el4j.services.remoting.protocol.Burlap">
        <property name="serviceHost">
            <value>${j2ee-web.host}</value>
        </property>
        <property name="servicePort">
            <value>${j2ee-web.port}</value>
        </property>
        <property name="contextPath">
            <value>module-remoting_and_interface_enrichment-tests-web</value>
        </property>
        <property name="implicitContextPassingRegistry">
            <ref local="implicitContextPassingRegistry" />
        </property>
    </bean>

    <bean id="soapProtocol" class="ch.elca.el4j.services.remoting.protocol.Soap">
        <property name="serviceHost">
            <value>${j2ee-web.host}</value>
        </property>
        <property name="servicePort">
            <value>${j2ee-web.port}</value>
        </property>
        <property name="contextPath">
            <value>module-remoting_and_interface_enrichment-tests-web</value>
        </property>
        <property name="protocolSpecificConfiguration">
            <ref local="soapProtocolSpecificConfiguration"/>
        </property>
        <property name="exceptionManager">
            <ref local="soapExceptionManager"/>
        </property>
        <property name="exceptionTranslationEnabled">
            <value>true</value>
        </property>
        <property name="implicitContextPassingRegistry">
            <ref local="implicitContextPassingRegistry" />
        </property>
    </bean>
    
    <bean id="soapProtocolSpecificConfiguration" 
          class="ch.elca.el4j.services.remoting.protocol.soap.SoapSpecificConfiguration">
        <property name="typeMappings">
            <list>
                <bean class="ch.elca.el4j.services.remoting.protocol.soap.axis.encoding.BeanTypeMapping">
                    <property name="types">
                        <list>
                            <value>ch.elca.el4j.tests.remoting.service.CalculatorValueObject</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
    
    <bean id="soapExceptionManager"
          class="ch.elca.el4j.services.remoting.protocol.soap.axis.faulthandling.SoapExceptionManager">
        <property name="soapExceptionHandlers">
            <map>
                <entry key="ch.elca.el4j.tests.remoting.service.SpecialCalculatorException">
                    <bean class="ch.elca.el4j.services.remoting.protocol.soap.axis.faulthandling.StringArgumentHandler">
                        <property name="sendServerSideStackTraceActive">
                            <value>true</value>
                        </property>
                    </bean>
                </entry>
            </map>
        </property>
        <property name="defaultHandler">
            <bean class="ch.elca.el4j.services.remoting.protocol.soap.axis.faulthandling.DefaultHandler">
                <property name="sendServerSideStackTraceActive">
                    <value>true</value>
                </property>
            </bean>
        </property>
        <property name="allowedTranslations">
            <set>
                <value>ch.elca.el4j.core.exceptions.BaseException</value>
                <value>ch.elca.el4j.core.exceptions.BaseRTException</value>
            </set>
        </property>
    </bean>
    
    <bean id="soapProtocolForSpecificSoapConformExceptions" 
        class="ch.elca.el4j.services.remoting.protocol.Soap">
        <property name="serviceHost">
            <value>${j2ee-web.host}</value>
        </property>
        <property name="servicePort">
            <value>${j2ee-web.port}</value>
        </property>
        <property name="contextPath">
            <value>module-remoting_and_interface_enrichment-tests-web</value>
        </property>
        <property name="protocolSpecificConfiguration">
            <ref local="protocolSpecificConfigurationForSpecificSoapConformExceptions"/>
        </property>
        <property name="exceptionTranslationEnabled">
            <value>false</value>
        </property>
        <property name="soapHeaderImplicitContextPassingRegistry">
            <ref local="soapHeaderImplicitContextPassingRegistry" />
        </property>
    </bean>
    
    <bean id="protocolSpecificConfigurationForSpecificSoapConformExceptions" 
          class="ch.elca.el4j.services.remoting.protocol.soap.SoapSpecificConfiguration">
        <property name="typeMappings">
            <list>
                <bean class="ch.elca.el4j.services.remoting.protocol.soap.axis.encoding.BeanTypeMapping">
                    <property name="types">
                        <list>
                            <value>ch.elca.el4j.tests.remoting.service.soap.RemoteExceptionWithData</value>
                            <value>ch.elca.el4j.tests.remoting.service.CalculatorValueObject</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="typeMappingVersion">
            <value>1.2</value>
        </property>
        <property name="defaultTypeMapping">
            <value>false</value>
        </property>
        <property name="encodingStyleUri">
            <value></value>
        </property>
        <property name="pruneTopNodeImplicitContextPassing">
            <value>true</value>
        </property>
    </bean>

    <bean id="implicitContextPassingRegistry" 
        class="ch.elca.el4j.tests.remoting.service.TestImplicitContextPassingRegistry" />

    <bean id="soapHeaderImplicitContextPassingRegistry"
        class="ch.elca.el4j.core.contextpassing.DefaultImplicitContextPassingRegistry" />
    <bean id="soapHeaderImplicitContextPasser1"
        class="ch.elca.el4j.tests.remoting.service.SoapHeaderImplicitContextPasser">
        <property name="implicitContextPassingRegistry">
            <ref local="soapHeaderImplicitContextPassingRegistry"/>
        </property>
    </bean>
    
</beans>
