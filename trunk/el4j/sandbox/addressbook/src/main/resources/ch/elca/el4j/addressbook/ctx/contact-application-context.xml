<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!-- $Id$ -->
<beans>
	<bean id="application" class="org.springframework.richclient.application.Application">
		<constructor-arg index="0" ref="applicationDescriptor"/>
		<constructor-arg index="1" ref="lifecycleAdvisor"/>
	</bean>
	
    <bean id="lifecycleAdvisor" class="ch.elca.el4j.addressbook.app.LifecycleAdvisor">
        <property name="windowCommandBarDefinitions" value="ch/elca/el4j/addressbook/ui/commands-context.xml"/>
        <property name="startingPageId" value="addressView"/>
    </bean>

	<!-- 
    <bean id="initialView" class="org.springframework.richclient.application.support.DefaultViewDescriptor">
        <property name="viewClass" value="org.springframework.richclient.samples.simple.ui.InitialView"/>
        <property name="viewProperties">
            <map>
                <entry key="firstMessage" value="firstMessage.text"/>
                <entry key="descriptionTextPath" value="org/springframework/richclient/samples/simple/ui/initialViewText.html"/>
            </map>
        </property>
    </bean>
 	-->
 	
    <bean id="addressView" class="org.springframework.richclient.application.support.DefaultViewDescriptor">
        <property name="viewClass">
            <value>ch.elca.el4j.addressbook.ui.AddressbookView</value>
        </property>
        <property name="viewProperties">
            <map>
            	
                <entry key="myAddressBook" value-ref="myAddressbook"/>
            </map>
        </property>
    </bean>

	<bean id="myAddressbook" class="ch.elca.el4j.addressbook.dom.Addressbook">
		<property name="daoRegistry" ref="daoRegistry"/>
	</bean>

    <bean id="serviceLocator" class="org.springframework.richclient.application.ApplicationServicesLocator">
        <property name="applicationServices" ref="applicationServices"/>
    </bean>

   
    <bean id="applicationDescriptor" class="org.springframework.richclient.application.support.DefaultApplicationDescriptor">
		<property name="version" value="1.0"/>
		<property name="buildId" value="20060408-001"/>
	</bean>

	<bean id="applicationObjectConfigurer" depends-on="serviceLocator"
		class="org.springframework.richclient.application.config.DefaultApplicationObjectConfigurer">
	</bean>
		
	<bean id="lookAndFeelConfigurer" class="org.springframework.richclient.application.config.JGoodiesLooksConfigurer">
		<property name="popupDropShadowEnabled" value="false" />
		<property name="theme">	
			<bean class="com.jgoodies.looks.plastic.theme.ExperienceBlue"/>
		</property>
	</bean>
	
	<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames">
			<list>
				<value>ch.elca.el4j.addressbook.ui.messages</value>
				<value>org.springframework.richclient.application.messages</value>
			</list>
		</property>
	</bean>
	
	<bean id="imageResourcesFactory" class="org.springframework.context.support.ResourceMapFactoryBean">
		<property name="locations">
			<list>
				<value>classpath:org/springframework/richclient/image/images.properties</value>
				<value>classpath:ch/elca/el4j/addressbook/ui/images.properties</value>
			</list>
		</property>
		<property name="resourceBasePath" value="images/"/>
	</bean>
	
	<bean id="imageSource" class="org.springframework.richclient.image.DefaultImageSource">
		<constructor-arg index="0" ref="imageResourcesFactory"/>
		<property name="brokenImageIndicator" value="images/error_obj.gif"/>
	</bean>
	
	<bean id="formComponentInterceptorFactory" class="org.springframework.richclient.form.builder.support.ChainedInterceptorFactory">
		<property name="interceptorFactories">
			<list>
				<bean class="org.springframework.richclient.form.builder.support.ColorValidationInterceptorFactory">
					<property name="errorColor" value="255,245,245"/>
				</bean>
				<bean class="org.springframework.richclient.form.builder.support.OverlayValidationInterceptorFactory"/>
				<bean class="org.springframework.richclient.text.TextComponentPopupInterceptorFactory"/>
				<bean class="org.springframework.richclient.list.ComboBoxAutoCompletionInterceptorFactory"/>
			</list>
		</property>
	</bean>

	<bean id="rulesSource" class="ch.elca.el4j.addressbook.dom.ValidationRulesSource"/>

	<bean id="conversionService" class="org.springframework.richclient.application.DefaultConversionServiceFactoryBean">
		<property name="formatterFactory">
			<bean class="ch.elca.el4j.addressbook.ui.AppFormatterFactory"/>
		</property>
	</bean>
	
	 <bean id="applicationServices" class="org.springframework.richclient.application.support.DefaultApplicationServices"/>

    <bean id="applicationEventMulticaster" class="org.springframework.context.event.SimpleApplicationEventMulticaster" />
	
 
</beans>
