<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <!-- Version: $Revision$ -->
    <!-- URL: $URL$ -->
    <!-- Date: $Date$ -->
    <!-- Author: $Author$ -->

    <!-- Locator for the application service registry -->
    <bean id="serviceLocator" class="org.springframework.richclient.application.ApplicationServicesLocator">
        <property name="applicationServices" ref="applicationServices"/>
    </bean>

    <!-- Application Service Registry -->
    <bean id="applicationServices" singleton="true"
      class="org.springframework.richclient.application.support.DefaultApplicationServices">
      <property name="applicationObjectConfigurerId"><idref bean="applicationObjectConfigurer"/></property>
      <property name="binderSelectionStrategy" ref="binderSelectionStrategy"/>
      <property name="componentFactory" ref="componentFactory"/>
      <property name="conversionService" ref="conversionService"/>
      <property name="fieldFaceSource" ref="formFieldFaceSource"/>
      <property name="formComponentInterceptorFactory" ref="formComponentInterceptorFactory"/>
      <property name="imageSource" ref="imageSource"/>
      <property name="messageSource" ref="messageSource"/>
      <property name="rulesSource" ref="rulesSource"/>
      <property name="registryEntries">
          <map>
              <entry>
                  <key><value>org.springframework.context.event.ApplicationEventMulticaster</value></key>
                  <idref bean="applicationEventMulticaster"/>
              </entry>
          </map>          
      </property>
    </bean>

    <!-- 
        Sends all application events to every registered application listener.
        Used views are registered application listeners. The bean with id 
        "applicationEventMulticaster" is looked up by the application context.
    -->
    <bean id="applicationEventMulticaster"
        class="org.springframework.context.event.SimpleApplicationEventMulticaster" />

    <!--
        Converter service. Listed in service registry.
    -->
    <bean id="conversionService" 
        class="ch.elca.el4j.services.gui.richclient.converters.ExtendedConversionService">
        <property name="converters">
            <list>
                <bean id="converterBooleanToText"
                    class="ch.elca.el4j.services.gui.richclient.converters.BooleanToText">
                </bean>
                <bean id="converterTextToBoolean"
                    class="ch.elca.el4j.services.gui.richclient.converters.TextToBoolean">
                </bean>
                <bean id="converterNumberToText"
                    class="ch.elca.el4j.services.gui.richclient.converters.NumberToText">
                    <constructor-arg ref="formatterLocator"/>
                    <constructor-arg value="true"/>
                </bean>
                <bean id="converterTextToNumber"
                    class="ch.elca.el4j.services.gui.richclient.converters.TextToNumber">
                    <constructor-arg ref="formatterLocator"/>
                    <constructor-arg value="true"/>
                </bean>
                <bean id="converterDateToText"
                    class="ch.elca.el4j.services.gui.richclient.converters.DateToText">
                    <constructor-arg ref="formatterLocator"/>
                    <constructor-arg value="true"/>
                </bean>
                <bean id="converterTextToDate"
                    class="ch.elca.el4j.services.gui.richclient.converters.TextToDate">
                    <constructor-arg ref="formatterLocator"/>
                    <constructor-arg value="true"/>
                </bean>
                <bean id="converterDateToSqlType"
                    class="ch.elca.el4j.services.gui.richclient.converters.DateToSqlType"/>
                <bean id="converterSqlTypeToDate"
                    class="ch.elca.el4j.services.gui.richclient.converters.SqlTypeToDate"/>
            </list>
        </property>
        <property name="formatterLocator">
            <ref bean="formatterLocator"/>
        </property>
    </bean>
    
    <!-- Formatter locator used in string converters. -->
    <bean id="formatterLocator"
        class="org.springframework.binding.format.support.SimpleFormatterLocator">
        <property name="defaultDateStyle">
            <bean name="org.springframework.binding.format.Style.SHORT"
                class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        </property>
        <property name="defaultTimeStyle">
            <bean name="org.springframework.binding.format.Style.SHORT"
                class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/>
        </property>
    </bean>

    <!-- 
        Sets the look and feel for the application.
    -->
   <bean id="lookAndFeelConfigurer"
        class="org.springframework.richclient.application.config.JGoodiesLooksConfigurer">
        <property name="popupDropShadowEnabled" value="false" />
        <property name="theme">
            <bean class="com.jgoodies.looks.plastic.theme.ExperienceBlue" />
        </property>
    </bean>
</beans>