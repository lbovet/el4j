<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<!-- Version: $Revision$ -->
	<!-- URL: $URL$ -->
	<!-- Date: $Date$ -->
	<!-- Author: $Author$ -->


	<parent>
		<groupId>ch.elca.el4j</groupId>
		<artifactId>el4j</artifactId>
		<version>1.5.1</version>
	</parent>
	
	<artifactId>el4j-framework</artifactId>
	<packaging>pom</packaging>
	<name>EL4J framework</name>
	<build>
		<plugins>
			<!-- Building -->
			<plugin>
				<groupId>ch.elca.el4j.maven.plugins</groupId>
				<artifactId>maven-env-support-plugin</artifactId>
			</plugin>
			<!-- Packaging -->
			<plugin>
				<groupId>ch.elca.el4j.maven.plugins</groupId>
				<artifactId>maven-manifest-decorator-plugin</artifactId>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-source-plugin</artifactId>
			</plugin>
			
			<!-- IDE -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-eclipse-plugin</artifactId>
			</plugin>
			<plugin>
				<groupId>ch.elca.el4j.maven.plugins</groupId>
				<artifactId>maven-checkclipse-helper-plugin</artifactId>
			</plugin>
		</plugins>
	</build>
	<modules>
		<module>modules</module>
		<module>plugins</module>
		<!-- tests moved to profile integrationTests -->
	</modules>
	<dependencies>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
		</dependency>
		<dependency>
			<groupId>org.easymock</groupId>
			<artifactId>easymock</artifactId>
		</dependency>
		<dependency>
			<groupId>org.easymock</groupId>
			<artifactId>easymockclassextension</artifactId>
		</dependency>
	</dependencies>
	<reporting>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-report-plugin</artifactId>
				<version>${version.maven-surefire-report-plugin}</version>
			</plugin>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>taglist-maven-plugin</artifactId>
				<version>${version.taglist-maven-plugin}</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-checkstyle-plugin</artifactId>
				<version>${version.maven-checkstyle-plugin}</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jxr-plugin</artifactId>
				<version>${version.maven-jxr-plugin}</version>
				<configuration>
					<aggregate>true</aggregate>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-pmd-plugin</artifactId>
				<version>${version.maven-pmd-plugin}</version>
				<configuration>
					<targetJdk>${el4j.java.version}</targetJdk>
					<aggregate>true</aggregate>
					<format>html</format>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-project-info-reports-plugin</artifactId>
				<version>${version.maven-project-info-reports-plugin}</version>
				<reportSets>
					<reportSet>
						<id>standardReports</id>
						<reports>
							<report>dependencies</report>
							<report>dependency-convergence</report>
							<report>issue-tracking</report>
							<report>mailing-list</report>
							<report>summary</report>
							<report>project-team</report>
							<report>index</report>
						</reports>
					</reportSet>
				</reportSets>
			</plugin>
		</plugins>
	</reporting>


	<profiles>
		<profile>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<id>integrationTests</id>
			<modules>
				<module>tests</module>
			</modules>
		</profile>
		<profile>
			<id>test.quiet</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-surefire-plugin</artifactId>
						<configuration>
							<testFailureIgnore>true</testFailureIgnore>
							<reportsDirectory>${surefire.reports.directory}</reportsDirectory>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<surefire.reports.directory>${project.build.directory}/surefire-reports</surefire.reports.directory>
			</properties>
		</profile>
		<profile>
			<id>generate.doc.set.framework-modules</id>
			<build>
				<plugins>
					<plugin>
						<groupId>ch.elca.el4j.maven.plugins</groupId>
						<artifactId>maven-file-collector-plugin</artifactId>
						<configuration>
							<rootSourceDirectory>${el4j.external}/framework</rootSourceDirectory>
							<sourceDirectoryIncludePatterns>modules/**/src/main/java</sourceDirectoryIncludePatterns>
							<sourceFileIncludePatterns>**/*.java,**/*.html</sourceFileIncludePatterns>
							<targetDirectory>${aggregated.files.output.directory}</targetDirectory>
							<allowOverwrite>false</allowOverwrite>
						</configuration>
						<executions>
							<execution>
								<id>copy-java-sources_set-framework-modules</id>
								<phase>pre-site</phase>
								<goals>
									<goal>aggregate-files</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-javadoc-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcepath>${aggregated.files.output.directory}</sourcepath>
							<reportOutputDirectory>${javadoc.output.directory}</reportOutputDirectory>
							<doctitle>${javadoc.title}</doctitle>
							<windowtitle>${javadoc.title}</windowtitle>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-jxr-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcePath>${aggregated.files.output.directory}</sourcePath>
							<destDir>${jxr.output.directory}</destDir>
							<javadocDir>${javadoc.output.directory}</javadocDir>
							<linkJavadoc>true</linkJavadoc>
							<windowTitle>${jxr.title}</windowTitle>
							<docTitle>${jxr.title}</docTitle>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<aggregated.files.output.directory>${el4j.external}/framework/target/aggregated-files/${set.framework-modules}</aggregated.files.output.directory>
				<javadoc.output.directory>${el4j.external}/framework/target/site/${set.framework-modules}/apidocs</javadoc.output.directory>
				<javadoc.title>EL4J framework modules ${project.version} API</javadoc.title>
				<jxr.output.directory>${el4j.external}/framework/target/site/${set.framework-modules}/xref</jxr.output.directory>
				<jxr.title>EL4J framework modules ${project.version} Reference</jxr.title>
			</properties>
		</profile>
		<profile>
			<id>generate.doc.set.framework-applications</id>
			<build>
				<plugins>
					<plugin>
						<groupId>ch.elca.el4j.maven.plugins</groupId>
						<artifactId>maven-file-collector-plugin</artifactId>
						<configuration>
							<rootSourceDirectory>${el4j.external}/applications</rootSourceDirectory>
							<sourceDirectoryIncludePatterns>templates/**/src/main/java</sourceDirectoryIncludePatterns>
							<sourceFileIncludePatterns>**/*.java,**/*.html</sourceFileIncludePatterns>
							<targetDirectory>${aggregated.files.output.directory}</targetDirectory>
							<allowOverwrite>false</allowOverwrite>
						</configuration>
						<executions>
							<execution>
								<id>copy-java-sources_set-framework-applications</id>
								<phase>pre-site</phase>
								<goals>
									<goal>aggregate-files</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-javadoc-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcepath>${aggregated.files.output.directory}</sourcepath>
							<reportOutputDirectory>${javadoc.output.directory}</reportOutputDirectory>
							<doctitle>${javadoc.title}</doctitle>
							<windowtitle>${javadoc.title}</windowtitle>
							<show>private</show>
							<offlineLinks>
								<offlineLink>
									<url>../../${set.framework-modules}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-modules}/apidocs</location>
								</offlineLink>
							</offlineLinks>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-jxr-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcePath>${aggregated.files.output.directory}</sourcePath>
							<destDir>${jxr.output.directory}</destDir>
							<javadocDir>${javadoc.output.directory}</javadocDir>
							<linkJavadoc>true</linkJavadoc>
							<windowTitle>${jxr.title}</windowTitle>
							<docTitle>${jxr.title}</docTitle>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<aggregated.files.output.directory>${el4j.external}/framework/target/aggregated-files/${set.framework-applications}</aggregated.files.output.directory>
				<javadoc.output.directory>${el4j.external}/framework/target/site/${set.framework-applications}/apidocs</javadoc.output.directory>
				<javadoc.title>EL4J framework applications ${project.version} API</javadoc.title>
				<jxr.output.directory>${el4j.external}/framework/target/site/${set.framework-applications}/xref</jxr.output.directory>
				<jxr.title>EL4J framework applications ${project.version} Reference</jxr.title>
			</properties>
		</profile>
		<profile>
			<id>generate.doc.set.framework-tests</id>
			<build>
				<plugins>
					<plugin>
						<groupId>ch.elca.el4j.maven.plugins</groupId>
						<artifactId>maven-file-collector-plugin</artifactId>
						<configuration>
							<rootSourceDirectory>${el4j.external}/framework</rootSourceDirectory>
							<sourceDirectoryExcludePatterns>${el4j.external}/framework/tests/remoting/versioning/src/**/java</sourceDirectoryExcludePatterns>
							<sourceDirectoryIncludePatterns>modules/**/src/test/java,tests/**/src/main/java,tests/**/src/test/java</sourceDirectoryIncludePatterns>
							<sourceFileIncludePatterns>**/*.java,**/*.html</sourceFileIncludePatterns>
							<targetDirectory>${aggregated.files.output.directory}</targetDirectory>
							<allowOverwrite>false</allowOverwrite>
						</configuration>
						<executions>
							<execution>
								<id>copy-java-sources_set-framework-tests</id>
								<phase>pre-site</phase>
								<goals>
									<goal>aggregate-files</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-javadoc-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcepath>${aggregated.files.output.directory}</sourcepath>
							<reportOutputDirectory>${javadoc.output.directory}</reportOutputDirectory>
							<destDir>./</destDir>
							<doctitle>${javadoc.title}</doctitle>
							<windowtitle>${javadoc.title}</windowtitle>
							<show>private</show>
							<offlineLinks>
								<offlineLink>
									<url>../../${set.framework-modules}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-modules}/apidocs</location>
								</offlineLink>
								<!--
								<offlineLink>
									<url>../../${set.framework-applications}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-applications}/apidocs</location>
								</offlineLink>
								-->
							</offlineLinks>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-jxr-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcePath>${aggregated.files.output.directory}</sourcePath>
							<destDir>${jxr.output.directory}</destDir>
							<javadocDir>${javadoc.output.directory}</javadocDir>
							<linkJavadoc>true</linkJavadoc>
							<windowTitle>${jxr.title}</windowTitle>
							<docTitle>${jxr.title}</docTitle>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<aggregated.files.output.directory>${el4j.external}/framework/target/aggregated-files/${set.framework-tests}</aggregated.files.output.directory>
				<javadoc.output.directory>${el4j.external}/framework/target/site/${set.framework-tests}/apidocs</javadoc.output.directory>
				<javadoc.title>EL4J framework tests ${project.version} API</javadoc.title>
				<jxr.output.directory>${el4j.external}/framework/target/site/${set.framework-tests}/xref</jxr.output.directory>
				<jxr.title>EL4J framework tests ${project.version} Reference</jxr.title>
			</properties>
		</profile>
		<profile>
			<id>generate.doc.set.framework-demos</id>
			<build>
				<plugins>
					<plugin>
						<groupId>ch.elca.el4j.maven.plugins</groupId>
						<artifactId>maven-file-collector-plugin</artifactId>
						<configuration>
							<rootSourceDirectory>${el4j.external}/applications/demos</rootSourceDirectory>
							<sourceDirectoryIncludePatterns>**/src/main/java,**/src/test/java</sourceDirectoryIncludePatterns>
							<sourceFileIncludePatterns>**/*.java,**/*.html</sourceFileIncludePatterns>
							<targetDirectory>${aggregated.files.output.directory}</targetDirectory>
							<allowOverwrite>false</allowOverwrite>
						</configuration>
						<executions>
							<execution>
								<id>copy-java-sources_set-framework-demos</id>
								<phase>pre-site</phase>
								<goals>
									<goal>aggregate-files</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-javadoc-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcepath>${aggregated.files.output.directory}</sourcepath>
							<reportOutputDirectory>${javadoc.output.directory}</reportOutputDirectory>
							<doctitle>${javadoc.title}</doctitle>
							<windowtitle>${javadoc.title}</windowtitle>
							<show>private</show>
							<offlineLinks>
								<offlineLink>
									<url>../../${set.framework-modules}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-modules}/apidocs</location>
								</offlineLink>
								<!--
								<offlineLink>
									<url>../../${set.framework-applications}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-applications}/apidocs</location>
								</offlineLink>
								-->
								<offlineLink>
									<url>../../${set.framework-tests}/apidocs</url>
									<location>${el4j.external}/framework/target/site/${set.framework-tests}/apidocs</location>
								</offlineLink>
							</offlineLinks>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-jxr-plugin</artifactId>
						<configuration>
							<aggregate>true</aggregate>
							<sourcePath>${aggregated.files.output.directory}</sourcePath>
							<destDir>${jxr.output.directory}</destDir>
							<javadocDir>${javadoc.output.directory}</javadocDir>
							<linkJavadoc>true</linkJavadoc>
							<windowTitle>${jxr.title}</windowTitle>
							<docTitle>${jxr.title}</docTitle>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<aggregated.files.output.directory>${el4j.external}/framework/target/aggregated-files/${set.framework-demos}</aggregated.files.output.directory>
				<javadoc.output.directory>${el4j.external}/framework/target/site/${set.framework-demos}/apidocs</javadoc.output.directory>
				<javadoc.title>EL4J framework demos ${project.version} API</javadoc.title>
				<jxr.output.directory>${el4j.external}/framework/target/site/${set.framework-demos}/xref</jxr.output.directory>
				<jxr.title>EL4J framework demos ${project.version} Reference</jxr.title>
			</properties>
		</profile>
	</profiles>
	<properties>
		<!-- Sets values -->
		<set.framework-modules>framework-modules</set.framework-modules>
		<set.framework-applications>framework-applications</set.framework-applications>
		<set.framework-tests>framework-tests</set.framework-tests>
		<set.framework-demos>framework-demos</set.framework-demos>
	</properties>
</project>
